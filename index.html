<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .px1{
            
            margin-top: 30px;
            margin-left: 560px;
            background: #CCCCCC;
           height: 150px;
           width: 450px;
            position: relative;
            
            
        }

    </style>
</head>
<body>
    <center>
        <table border="4" id="myTable">
            <thread>
                <tr id="updatename">
                    <th>Name</th>
                    <td><input type="text" name="fname" id="fname" oninput="addnq()"></td>
                </tr>
            </thread>
            <tbody>
                <tr>
                    <th>Qualification</th>
                    <td><input type="text" name="fq" id="fq" oninput="addnq()"></td>
                </tr>
                <tr id="hh">
                    <th>Hobbie</th>
                    <td><input type="text" name="fh" id="fh1" oninput="addHobbies()"></td>
                </tr>
                <tr  id="btna">
                    <td><input type="button" name="button" id="btn" value="Add Hobbies" onclick="addrow()"></td>

                </tr>
            </tbody>
            </table>
    </center>

    <div id="paragraph" class="px1" >
     <p>I, ______, would like to apply for an internship at your organisation.<br>
        My Qualification is __________.<br>
        My hobbies are ______, ________ & __________.<br>
        Thanking you,<br>
        Your Sincerely<br>
        _____________</p>

    </div>

    <script>
        var name="";
        var qualification="";
        let hobbies = [];
        let counter=1;
        var d=3;
        
        function addnq(){
         name = document.getElementById('fname').value;
         qualification = document.getElementById('fq').value;
         var fetchname = document.getElementById('paragraph');
         fetchname.innerHTML = `<p>I,${name}, would like to apply for an internship at your organisation.<br>
         My Qualification is ${qualification}.<br>
         My hobbies are ______, ________ & __________.<br>
         Thanking you,<br>
         Your Sincerely<br>
           ${name}.</p>`;
        }

        function addHobbies(){
            var fetchhobbies = document.getElementById('paragraph');
            var id = "fh"+counter;
            if(counter==1)
            {
                var hobbie = document.getElementById(id).value;
                fetchhobbies.innerHTML=`I,${name}, would like to apply for an internship at your organisation.<br>
                My Qualification is ${qualification}.<br>
                My hobbie is ${hobbie}.<br>
                Thanking you,<br>
                Your Sincerely<br>
                ${name}.`;
            }
            if(counter>1)
            {
                var hobbie2="";
                for(let i=1;i<=counter-1;i++)
                {
                    id="fh"+i;
                    if(i==1)
                    {
                        hobbie2 = hobbie2+document.getElementById(id).value  
                    }
                    else
                    {
                    hobbie2 = hobbie2+","+document.getElementById(id).value;
                    }
                }
                // let lastindex=0
                // for(let j=0;j<hobbie2.length;j++)
                // {
                //     if(hobbie2.charAt(j)==',')
                //     {
                //      lastindex = j;
                //     }

                // }


                //     var firstpart = hobbie2.slice(0,lastindex);
                //     var lastpart = hobbie2.slice(lastindex+1,hobbie2.length);
                //     hobbie2 = firstpart+"&"+lastpart; 
                id="fh"+counter;
                  hobbie2=hobbie2+"&"+document.getElementById(id).value;


                fetchhobbies.innerHTML=`I,${name}, would like to apply for an internship at your organisation.<br>
                My Qualification is ${qualification}.<br>
                My hobbies are  ${hobbie2}.<br>
                Thanking you,<br>
                Your Sincerely<br>
                ${name}.`


            }
            
        
            
         

        }
        function addrow(){
            var table = document.getElementById("myTable");
            var row = table.insertRow(d);
            var cell1 = row.insertCell(0);
            counter++;
            row.innerHTML=`<p>   </p><td><input type="text" name="fh" id="fh${counter}" oninput="addHobbies()" placeholder="Add Hobbies..."  ></td>`;
            d++;
        }
    </script>
    
</body>
</html>